# Глава 1 (Продължение). Проучване на принципи, практики и технологии

## 1.17. Архитектура на Монохранилище (Monorepo)

При разработването на сложни системи, включващи множество приложения (CLI, Web, Docs) и споделени библиотеки, изборът на стратегия за управление на кодовата база е от критично значение. Монохранилището (Monorepo) е архитектурен модел, при който множество проекти се съхраняват в рамките на едно единствено Git хранилище [18].

1.17.1. Предимства и мотивация
Използването на монохранилище в проекта bb-thesis-2026 осигурява няколко ключови предимства:
- **Споделен код (Code Sharing):** Лесно споделяне на типове данни (TypeScript), конфигурации (ESLint, Tailwind) и UI компоненти между уеб приложенията.
- **Атомни промени (Atomic Changes):** Възможност за извършване на промени, обхващащи няколко приложения, в рамките на един единствен commit. Това елиминира проблемите с версионирането на зависимости между отделните хранилища.
- **Единен източник на истината:** Опростява управлението на зависимостите и гарантира, че всички части на системата използват съвместими версии на библиотеките.

1.17.2. Управление на работни пространства с PNPM
Проектът използва PNPM като пакетен мениджър и инструмент за управление на работни пространства (Workspaces). PNPM се отличава с:
- **Ефективност на дисковото пространство:** Използва система от твърди връзки (hard links) и символни връзки (symlinks), за да избегне дублирането на пакети в различни проекти.
- **Стриктност:** Гарантира, че приложенията имат достъп само до зависимости, които са изрично дефинирани в техния `package.json`, предотвратявайки т.нар. "phantom dependencies".

## 1.18. Високопроизводителна система за изграждане: Turborepo

За решаване на проблемите с мащабируемостта и бавното време за изграждане в монохранилищата, проектът внедрява Turborepo – интелигентна система за управление на работните процеси [11].

1.18.1. Интелигентно кеширане (Remote & Local Caching)
Най-силната страна на Turborepo е способността му да не изпълнява една и съща задача два пъти. Ако изходният код на дадено приложение или неговите зависимости не са се променили, Turborepo възстановява резултата от предишното изпълнение (логове и артефакти) от кеша. Това съкращава времето за CI/CD пайплайни от минути до секунди.

1.18.2. Граф на задачите и паралелно изпълнение
Turborepo анализира зависимостите между пакетите в хранилището и изгражда насочен ацикличен граф (DAG) на задачите. Това му позволява да изпълнява независими задачи паралелно, оптимизирайки максимално използването на процесорните ресурси.

1.18.3. Декларативни пайплайни (Pipelines)
Чрез конфигурационния файл `turbo.json`, проектът дефинира логически връзки между различните фази на разработка (напр. "build" зависи от "lint" и "check-types"). Това осигурява предвидимост и консистентност при локална разработка и в облачни среди.

> **Предложение за фигура:** Визуализация на DAG графа на Turborepo, показваща как `apps/web` и `apps/docs` зависят от `packages/ui`, и как задачите се изпълняват паралелно.
> *Фигура 1.9. Граф на зависимостите и паралелно изпълнение в Turborepo.*